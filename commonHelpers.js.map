{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport axios from 'axios';\nconst refs = {\n  form: document.querySelector('.form'),\n  gallery: document.querySelector('.gallery'),\n  loader: document.querySelector('.loader'),\n  loadMore: document.querySelector('.load-btn'),\n};\n\nrefs.loader.style.display = 'none';\nrefs.loadMore.style.display = 'none';\nlet page;\nconst options = {\n  key: '42243795-d3e0b32c8a225c14b798958b0',\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: true,\n  page: 1,\n  per_page: 15,\n  q: '',\n};\nasync function formSubmit(e) {\n  e.preventDefault();\n  refs.gallery.innerHTML = '';\n  options.page = 1;\n  refs.loader.style.display = 'block';\n  const inputValue = e.target.elements.input.value;\n  options.q = inputValue;\n  const images = await getPhotoByName();\n  try {\n    markup(images);\n  } catch (error) {\n    iziToast.show({\n      message: 'Error ',\n      messageColor: '#FFFFFF',\n      backgroundColor: '#EF4040',\n      position: 'topRight',\n      messageSize: '16px',\n      messageLineHeight: '24px',\n      maxWidth: '432px',\n    });\n    console.log(error);\n  }\n  refs.loadMore.style.display = 'block';\n  checkBtnLoadMore(images);\n  e.target.reset();\n}\nfunction markup(images) {\n  if (images.hits.length === 0) {\n    iziToast.show({\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n      messageColor: '#FFFFFF',\n      backgroundColor: '#EF4040',\n      position: 'topRight',\n      messageSize: '16px',\n      messageLineHeight: '24px',\n      maxWidth: '432px',\n    });\n    refs.gallery.innerHTML = '';\n  } else {\n    const link = images.hits\n      .map(\n        image => `<a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n        <img class=\"gallery-image\"\n        src=\"${image.webformatURL}\"\n        alt=\"${image.tags}\"\n         </a>\n        <div class=\"img-content\">\n        <div>\n        <h3>Likes</h3>\n        <p>${image.likes}</p>\n        </div>\n\n        <div>\n        <h3>Views</h3>\n        <p>${image.views}</p>\n        </div>\n\n        <div>\n        <h3>Comments</h3>\n        <p>${image.comments}</p>\n        </div>\n\n        <div>\n        <h3>Downloads</h3>\n        <p>${image.downloads}</p>\n        </div>\n        </div>\n        `\n      )\n      .join('');\n    refs.gallery.insertAdjacentHTML('beforeend', link);\n  }\n  let lightBox = new SimpleLightbox('.gallery-link');\n  lightBox.refresh();\n  refs.loader.style.display = 'none';\n}\nasync function getPhotoByName() {\n  const res = await axios.get('https://pixabay.com/api/?', {\n    params: options,\n  });\n  try {\n    return res.data;\n  } catch (error) {\n    iziToast.show({\n      message: 'Error ',\n      messageColor: '#FFFFFF',\n      backgroundColor: '#EF4040',\n      position: 'topRight',\n      messageSize: '16px',\n      messageLineHeight: '24px',\n      maxWidth: '432px',\n    });\n    console.log(error);\n  }\n}\nasync function onLoadMoreClick() {\n  const el = document.querySelector('.gallery-link');\n  const heithEl = el.getBoundingClientRect().height * 3;\n  options.page += 1;\n  refs.loader.style.display = 'block';\n  const images = await getPhotoByName();\n  try {\n    markup(images);\n  } catch (error) {\n    iziToast.show({\n      message: 'Error ',\n      messageColor: '#FFFFFF',\n      backgroundColor: '#EF4040',\n      position: 'topRight',\n      messageSize: '16px',\n      messageLineHeight: '24px',\n      maxWidth: '432px',\n    });\n    console.log(error);\n  }\n  checkBtnLoadMore(images);\n  window.scrollBy({\n    top: heithEl,\n    behavior: 'smooth',\n  });\n}\nfunction checkBtnLoadMore(images) {\n  const maxPage = Math.ceil(images.totalHits / options.per_page);\n  if (maxPage === options.page) {\n    refs.loadMore.style.display = 'none';\n    iziToast.show({\n      message: \"We're sorry, but you've reached the end of search results.\",\n      messageColor: '#FFFFFF',\n      backgroundColor: '#EF4040',\n      position: 'center',\n      messageSize: '16px',\n      messageLineHeight: '24px',\n      maxWidth: '432px',\n    });\n  }\n}\nrefs.form.addEventListener('submit', formSubmit);\nrefs.loadMore.addEventListener('click', onLoadMoreClick);\n"],"names":["refs","options","formSubmit","e","inputValue","images","getPhotoByName","markup","error","iziToast","checkBtnLoadMore","link","image","SimpleLightbox","res","axios","onLoadMoreClick","heithEl"],"mappings":"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"}